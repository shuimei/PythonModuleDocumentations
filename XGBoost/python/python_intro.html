
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Python Package Introduction &#8212; xgboost 0.80 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python API Reference" href="python_api.html" />
    <link rel="prev" title="XGBoost Python Package" href="index.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="python_api.html" title="Python API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="XGBoost Python Package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">xgboost 0.80 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">XGBoost Python Package</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../index.html" class="text-logo">XGBoost</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../build.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started.html">Get Started with XGBoost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">XGBoost Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discuss.xgboost.ai">XGBoost User Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">GPU support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter.html">XGBoost Parameters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python package</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python Package Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_api.html">Python API Reference</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/dmlc/xgboost/tree/master/demo/guide-python">Python examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R-package/index.html">R package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jvm/index.html">JVM package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../julia.html">Julia package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to XGBoost</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="index.html">XGBoost Python Package</a></li>
              
              <li>Python Package Introduction</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="python-package-introduction">
<h1>Python Package Introduction<a class="headerlink" href="#python-package-introduction" title="Permalink to this headline">¶</a></h1>
<p>This document gives a basic walkthrough of xgboost python package.</p>
<p><strong>List of other Helpful Links</strong></p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/tqchen/xgboost/blob/master/demo/guide-python">Python walkthrough code collections</a></li>
<li><a class="reference internal" href="python_api.html"><span class="doc">Python API Reference</span></a></li>
</ul>
<div class="section" id="install-xgboost">
<h2>Install XGBoost<a class="headerlink" href="#install-xgboost" title="Permalink to this headline">¶</a></h2>
<p>To install XGBoost, follow instructions in <a class="reference internal" href="../build.html"><span class="doc">Installation Guide</span></a>.</p>
<p>To verify your installation, run the following in Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xgboost</span> <span class="kn">as</span> <span class="nn">xgb</span>
</pre></div>
</div>
</div>
<div class="section" id="data-interface">
<h2>Data Interface<a class="headerlink" href="#data-interface" title="Permalink to this headline">¶</a></h2>
<p>The XGBoost python module is able to load data from:</p>
<ul class="simple">
<li>LibSVM text format file</li>
<li>Comma-separated values (CSV) file</li>
<li>NumPy 2D array</li>
<li>SciPy 2D sparse array</li>
<li>Pandas data frame, and</li>
<li>XGBoost binary buffer file.</li>
</ul>
<p>(See <a class="reference internal" href="../tutorials/input_format.html"><span class="doc">Text Input Format of DMatrix</span></a> for detailed description of text input format.)</p>
<p>The data is stored in a <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a> object.</p>
<ul>
<li><p class="first">To load a libsvm text file or a XGBoost binary file into <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="s1">&#39;train.svm.txt&#39;</span><span class="p">)</span>
<span class="n">dtest</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="s1">&#39;test.svm.buffer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">To load a CSV file into <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># label_column specifies the index of the column containing the true label</span>
<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="s1">&#39;train.csv?format=csv&amp;label_column=0&#39;</span><span class="p">)</span>
<span class="n">dtest</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="s1">&#39;test.csv?format=csv&amp;label_column=0&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(Note that XGBoost does not support categorical features; if your data contains
categorical features, load it as a NumPy array first and then perform
<a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html">one-hot encoding</a>.)</p>
</li>
<li><p class="first">To load a NumPy array into <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 5 entities, each contains 10 features</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># binary target</span>
<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">To load a <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/sparse.html#module-scipy.sparse" title="(in SciPy v1.1.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.sparse</span></code></a> array into <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">((</span><span class="n">dat</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)))</span>
<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">csr</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">To load a Pandas data frame into <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Saving <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a> into a XGBoost binary file will make loading faster:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="s1">&#39;train.svm.txt&#39;</span><span class="p">)</span>
<span class="n">dtrain</span><span class="o">.</span><span class="n">save_binary</span><span class="p">(</span><span class="s1">&#39;train.buffer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Missing values can be replaced by a default value in the <a class="reference internal" href="python_api.html#xgboost.DMatrix" title="xgboost.DMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">DMatrix</span></code></a> constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">missing</span><span class="o">=-</span><span class="mf">999.0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Weights can be set when needed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">missing</span><span class="o">=-</span><span class="mf">999.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="setting-parameters">
<h2>Setting Parameters<a class="headerlink" href="#setting-parameters" title="Permalink to this headline">¶</a></h2>
<p>XGBoost can use either a list of pairs or a dictionary to set <a class="reference internal" href="../parameter.html"><span class="doc">parameters</span></a>. For instance:</p>
<ul>
<li><p class="first">Booster parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">param</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max_depth&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;eta&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;silent&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;objective&#39;</span><span class="p">:</span> <span class="s1">&#39;binary:logistic&#39;</span><span class="p">}</span>
<span class="n">param</span><span class="p">[</span><span class="s1">&#39;nthread&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">param</span><span class="p">[</span><span class="s1">&#39;eval_metric&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;auc&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">You can also specify multiple eval metrics:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">param</span><span class="p">[</span><span class="s1">&#39;eval_metric&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;auc&#39;</span><span class="p">,</span> <span class="s1">&#39;ams@0&#39;</span><span class="p">]</span>

<span class="c1"># alternatively:</span>
<span class="c1"># plst = param.items()</span>
<span class="c1"># plst += [(&#39;eval_metric&#39;, &#39;ams@0&#39;)]</span>
</pre></div>
</div>
</li>
<li><p class="first">Specify validations set to watch performance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">evallist</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dtest</span><span class="p">,</span> <span class="s1">&#39;eval&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">dtrain</span><span class="p">,</span> <span class="s1">&#39;train&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="training">
<h2>Training<a class="headerlink" href="#training" title="Permalink to this headline">¶</a></h2>
<p>Training a model requires a parameter list and data set.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num_round</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">bst</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">dtrain</span><span class="p">,</span> <span class="n">num_round</span><span class="p">,</span> <span class="n">evallist</span><span class="p">)</span>
</pre></div>
</div>
<p>After training, the model can be saved.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bst</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="s1">&#39;0001.model&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The model and its feature map can also be dumped to a text file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># dump model</span>
<span class="n">bst</span><span class="o">.</span><span class="n">dump_model</span><span class="p">(</span><span class="s1">&#39;dump.raw.txt&#39;</span><span class="p">)</span>
<span class="c1"># dump model with feature map</span>
<span class="n">bst</span><span class="o">.</span><span class="n">dump_model</span><span class="p">(</span><span class="s1">&#39;dump.raw.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;featmap.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A saved model can be loaded as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bst</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">Booster</span><span class="p">({</span><span class="s1">&#39;nthread&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>  <span class="c1"># init model</span>
<span class="n">bst</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="s1">&#39;model.bin&#39;</span><span class="p">)</span>  <span class="c1"># load data</span>
</pre></div>
</div>
</div>
<div class="section" id="early-stopping">
<h2>Early Stopping<a class="headerlink" href="#early-stopping" title="Permalink to this headline">¶</a></h2>
<p>If you have a validation set, you can use early stopping to find the optimal number of boosting rounds.
Early stopping requires at least one set in <code class="docutils literal notranslate"><span class="pre">evals</span></code>. If there’s more than one, it will use the last.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">train</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">evals</span><span class="o">=</span><span class="n">evals</span><span class="p">,</span> <span class="n">early_stopping_rounds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The model will train until the validation score stops improving. Validation error needs to decrease at least every <code class="docutils literal notranslate"><span class="pre">early_stopping_rounds</span></code> to continue training.</p>
<p>If early stopping occurs, the model will have three additional fields: <code class="docutils literal notranslate"><span class="pre">bst.best_score</span></code>, <code class="docutils literal notranslate"><span class="pre">bst.best_iteration</span></code> and <code class="docutils literal notranslate"><span class="pre">bst.best_ntree_limit</span></code>. Note that <a class="reference internal" href="python_api.html#xgboost.train" title="xgboost.train"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xgboost.train()</span></code></a> will return a model from the last iteration, not the best one.</p>
<p>This works with both metrics to minimize (RMSE, log loss, etc.) and to maximize (MAP, NDCG, AUC). Note that if you specify more than one evaluation metric the last one in <code class="docutils literal notranslate"><span class="pre">param['eval_metric']</span></code> is used for early stopping.</p>
</div>
<div class="section" id="prediction">
<h2>Prediction<a class="headerlink" href="#prediction" title="Permalink to this headline">¶</a></h2>
<p>A model that has been trained or loaded can perform predictions on data sets.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 7 entities, each contains 10 features</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">dtest</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">ypred</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dtest</span><span class="p">)</span>
</pre></div>
</div>
<p>If early stopping is enabled during training, you can get predictions from the best iteration with <code class="docutils literal notranslate"><span class="pre">bst.best_ntree_limit</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ypred</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dtest</span><span class="p">,</span> <span class="n">ntree_limit</span><span class="o">=</span><span class="n">bst</span><span class="o">.</span><span class="n">best_ntree_limit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<p>You can use plotting module to plot importance and output tree.</p>
<p>To plot importance, use <a class="reference internal" href="python_api.html#xgboost.plot_importance" title="xgboost.plot_importance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xgboost.plot_importance()</span></code></a>. This function requires <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to be installed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">bst</span><span class="p">)</span>
</pre></div>
</div>
<p>To plot the output tree via <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, use <a class="reference internal" href="python_api.html#xgboost.plot_tree" title="xgboost.plot_tree"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xgboost.plot_tree()</span></code></a>, specifying the ordinal number of the target tree. This function requires <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xgb</span><span class="o">.</span><span class="n">plot_tree</span><span class="p">(</span><span class="n">bst</span><span class="p">,</span> <span class="n">num_trees</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>When you use <code class="docutils literal notranslate"><span class="pre">IPython</span></code>, you can use the <a class="reference internal" href="python_api.html#xgboost.to_graphviz" title="xgboost.to_graphviz"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xgboost.to_graphviz()</span></code></a> function, which converts the target tree to a <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> instance. The <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> instance is automatically rendered in <code class="docutils literal notranslate"><span class="pre">IPython</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xgb</span><span class="o">.</span><span class="n">to_graphviz</span><span class="p">(</span><span class="n">bst</span><span class="p">,</span> <span class="n">num_trees</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="index.html" title="previous chapter (use the left arrow)">XGBoost Python Package</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="python_api.html" title="next chapter (use the right arrow)">Python API Reference</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="python_api.html" title="Python API Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="XGBoost Python Package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">xgboost 0.80 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >XGBoost Python Package</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2016, xgboost developers. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>