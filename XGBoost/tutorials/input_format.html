
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Text Input Format of DMatrix &#8212; xgboost 0.80 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Notes on Parameter Tuning" href="param_tuning.html" />
    <link rel="prev" title="Feature Interaction Constraints" href="feature_interaction_constraint.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="param_tuning.html" title="Notes on Parameter Tuning"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="feature_interaction_constraint.html" title="Feature Interaction Constraints"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">xgboost 0.80 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">XGBoost Tutorials</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../index.html" class="text-logo">XGBoost</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../build.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started.html">Get Started with XGBoost</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">XGBoost Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model.html">Introduction to Boosted Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="aws_yarn.html">Distributed XGBoost with AWS YARN</a></li>
<li class="toctree-l2"><a class="reference external" href="https://xgboost.readthedocs.io/en/latest/jvm/xgboost4j_spark_tutorial.html">Distributed XGBoost with XGBoost4J-Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="dart.html">DART booster</a></li>
<li class="toctree-l2"><a class="reference internal" href="monotonic.html">Monotonic Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature_interaction_constraint.html">Feature Interaction Constraints</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Text Input Format of DMatrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="param_tuning.html">Notes on Parameter Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="external_memory.html">Using XGBoost External Memory Version (beta)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discuss.xgboost.ai">XGBoost User Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">GPU support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter.html">XGBoost Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R-package/index.html">R package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jvm/index.html">JVM package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../julia.html">Julia package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to XGBoost</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="index.html">XGBoost Tutorials</a></li>
              
              <li>Text Input Format of DMatrix</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="text-input-format-of-dmatrix">
<h1>Text Input Format of DMatrix<a class="headerlink" href="#text-input-format-of-dmatrix" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-input-format">
<h2>Basic Input Format<a class="headerlink" href="#basic-input-format" title="Permalink to this headline">¶</a></h2>
<p>XGBoost currently supports two text formats for ingesting data: LibSVM and CSV. The rest of this document will describe the LibSVM format. (See <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">this Wikipedia article</a> for a description of the CSV format.)</p>
<p>For training or predicting, XGBoost takes an instance file with the format as below:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt</span></code></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1 101:1.2 102:0.03
0 1:2.1 10001:300 10002:400
0 0:1.3 1:0.3
1 0:0.01 1:0.3
0 0:0.2 1:0.3
</pre></div>
</div>
</div>
<p>Each line represent a single instance, and in the first line ‘1’ is the instance label, ‘101’ and ‘102’ are feature indices, ‘1.2’ and ‘0.03’ are feature values. In the binary classification case, ‘1’ is used to indicate positive samples, and ‘0’ is used to indicate negative samples. We also support probability values in [0,1] as label, to indicate the probability of the instance being positive.</p>
</div>
<div class="section" id="auxiliary-files-for-additional-information">
<h2>Auxiliary Files for Additional Information<a class="headerlink" href="#auxiliary-files-for-additional-information" title="Permalink to this headline">¶</a></h2>
<p><strong>Note: all information below is applicable only to single-node version of the package.</strong> If you’d like to perform distributed training with multiple nodes, skip to the section <a class="reference internal" href="#embedding-additional-information-inside-libsvm-file">Embedding additional information inside LibSVM file</a>.</p>
<div class="section" id="group-input-format">
<h3>Group Input Format<a class="headerlink" href="#group-input-format" title="Permalink to this headline">¶</a></h3>
<p>For <a class="reference external" href="https://github.com/dmlc/xgboost/tree/master/demo/rank">ranking task</a>, XGBoost supports the group input format. In ranking task, instances are categorized into <em>query groups</em> in real world scenarios. For example, in the learning to rank web pages scenario, the web page instances are grouped by their queries. XGBoost requires an file that indicates the group information. For example, if the instance file is the <code class="docutils literal notranslate"><span class="pre">train.txt</span></code> shown above,  the group file should be named <code class="docutils literal notranslate"><span class="pre">train.txt.group</span></code> and be of the following format:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt.group</span></code></span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2
3
</pre></div>
</div>
</div>
<p>This means that, the data set contains 5 instances, and the first two instances are in a group and the other three are in another group. The numbers in the group file are actually indicating the number of instances in each group in the instance file in order.
At the time of configuration, you do not have to indicate the path of the group file. If the instance file name is <code class="docutils literal notranslate"><span class="pre">xxx</span></code>, XGBoost will check whether there is a file named <code class="docutils literal notranslate"><span class="pre">xxx.group</span></code> in the same directory.</p>
</div>
<div class="section" id="instance-weight-file">
<h3>Instance Weight File<a class="headerlink" href="#instance-weight-file" title="Permalink to this headline">¶</a></h3>
<p>Instances in the training data may be assigned weights to differentiate relative importance among them. For example, if we provide an instance weight file for the <code class="docutils literal notranslate"><span class="pre">train.txt</span></code> file in the example as below:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt.weight</span></code></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1
0.5
0.5
1
0.5
</pre></div>
</div>
</div>
<p>It means that XGBoost will emphasize more on the first and fourth instance (i.e. the positive instances) while training.
The configuration is similar to configuring the group information. If the instance file name is <code class="docutils literal notranslate"><span class="pre">xxx</span></code>, XGBoost will look for a file named <code class="docutils literal notranslate"><span class="pre">xxx.weight</span></code> in the same directory. If the file exists, the instance weights will be extracted and used at the time of training.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Binary buffer format and instance weights</p>
<p class="last">If you choose to save the training data as a binary buffer (using <a class="reference internal" href="../python/python_api.html#xgboost.DMatrix.save_binary" title="xgboost.DMatrix.save_binary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_binary()</span></code></a>), keep in mind that the resulting binary buffer file will include the instance weights. To update the weights, use the <a class="reference internal" href="../python/python_api.html#xgboost.DMatrix.set_weight" title="xgboost.DMatrix.set_weight"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_weight()</span></code></a> function.</p>
</div>
</div>
<div class="section" id="initial-margin-file">
<h3>Initial Margin File<a class="headerlink" href="#initial-margin-file" title="Permalink to this headline">¶</a></h3>
<p>XGBoost supports providing each instance an initial margin prediction. For example, if we have a initial prediction using logistic regression for <code class="docutils literal notranslate"><span class="pre">train.txt</span></code> file, we can create the following file:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt.base_margin</span></code></span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-0.4
1.0
3.4
</pre></div>
</div>
</div>
<p>XGBoost will take these values as initial margin prediction and boost from that. An important note about base_margin is that it should be margin prediction before transformation, so if you are doing logistic loss, you will need to put in value before logistic transformation. If you are using XGBoost predictor, use <code class="docutils literal notranslate"><span class="pre">pred_margin=1</span></code> to output margin values.</p>
</div>
</div>
<div class="section" id="embedding-additional-information-inside-libsvm-file">
<h2>Embedding additional information inside LibSVM file<a class="headerlink" href="#embedding-additional-information-inside-libsvm-file" title="Permalink to this headline">¶</a></h2>
<p><strong>This section is applicable to both single- and multiple-node settings.</strong></p>
<div class="section" id="query-id-columns">
<h3>Query ID Columns<a class="headerlink" href="#query-id-columns" title="Permalink to this headline">¶</a></h3>
<p>This is most useful for <a class="reference external" href="https://github.com/dmlc/xgboost/tree/master/demo/rank">ranking task</a>, where the instances are grouped into query groups. You may embed query group ID for each instance in the LibSVM file by adding a token of form <code class="docutils literal notranslate"><span class="pre">qid:xx</span></code> in each row:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt</span></code></span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1 qid:1 101:1.2 102:0.03
0 qid:1 1:2.1 10001:300 10002:400
0 qid:2 0:1.3 1:0.3
1 qid:2 0:0.01 1:0.3
0 qid:3 0:0.2 1:0.3
1 qid:3 3:-0.1 10:-0.3
0 qid:3 6:0.2 10:0.15
</pre></div>
</div>
</div>
<p>Keep in mind the following restrictions:</p>
<ul class="simple">
<li>You are not allowed to specify query ID’s for some instances but not for others. Either every row is assigned query ID’s or none at all.</li>
<li>The rows have to be sorted in ascending order by the query IDs. So, for instance, you may not have one row having large query ID than any of the following rows.</li>
</ul>
</div>
<div class="section" id="instance-weights">
<h3>Instance weights<a class="headerlink" href="#instance-weights" title="Permalink to this headline">¶</a></h3>
<p>You may specify instance weights in the LibSVM file by appending each instance label with the corresponding weight in the form of <code class="docutils literal notranslate"><span class="pre">[label]:[weight]</span></code>, as shown by the following example:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">train.txt</span></code></span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1:1.0 101:1.2 102:0.03
0:0.5 1:2.1 10001:300 10002:400
0:0.5 0:1.3 1:0.3
1:1.0 0:0.01 1:0.3
0:0.5 0:0.2 1:0.3
</pre></div>
</div>
</div>
<p>where the negative instances are assigned half weights compared to the positive instances.</p>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="feature_interaction_constraint.html" title="previous chapter (use the left arrow)">Feature Interaction Constraints</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="param_tuning.html" title="next chapter (use the right arrow)">Notes on Parameter Tuning</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="param_tuning.html" title="Notes on Parameter Tuning"
             >next</a> |</li>
        <li class="right" >
          <a href="feature_interaction_constraint.html" title="Feature Interaction Constraints"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">xgboost 0.80 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >XGBoost Tutorials</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2016, xgboost developers. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>